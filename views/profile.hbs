<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tech - Profile</title>

	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/font-awesome.min.css" rel="stylesheet">
	<link href="../css/styles.css" rel="stylesheet">
	
	<!--Custom Font-->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
	<!--[if lt IE 9]>
	<script src="js/html5shiv.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	
</head>
<body>
	<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-collapse"><span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span></button>
				<a class="navbar-brand" href="/">Tech</a>
			</div>
		</div>
	</nav>
	<div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">
		<div class="profile-sidebar">
			<div class="profile-userpic">
				<a href="profile"><img src="http://placehold.it/50/30a5ff/fff" class="img-responsive" alt=""></a>
			</div>
			{{#each this.user}}
			<div class="profile-usertitle">
				<div class="profile-usertitle-name"><a href="profile">{{Name}}</a></div>
				<div class="profile-usertitle-status"><span class="indicator label-success"></span>Online</div>
			</div>
			{{/each}}
			<div class="clear"></div>
		</div>
		<div class="divider"></div>
		<form role="search">
			<div class="form-group">
				<input type="text" class="form-control" placeholder="Search">
			</div>
		</form>
		<ul class="nav menu">
			<li><a href="admin-posts"><em class="fa fa-pencil-square-o">&nbsp;</em> Quản lý bài viết</a></li>
			<li><a href="admin-categories"><em class="fa fa-cubes">&nbsp;</em> Quản lý chuyên mục</a></li>
			<li><a href="admin-tags"><em class="fa fa-tags">&nbsp;</em> Quản lý nhãn</a></li>
			<li><a href="admin-users"><em class="fa fa-users">&nbsp;</em> Quản lý người dùng</a></li>
			<li><a href="sign-in-up"><em class="fa fa-power-off">&nbsp;</em> Logout</a></li>
		</ul>
	</div><!--/.sidebar-->

	<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
		<div class="row">
			<ol class="breadcrumb">
				<li><a href="#">
					<em class="fa fa-home"></em>
				</a></li>
				<li class="active">Profile</li>
			</ol>
		</div><!--/.row-->
		
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">Profile</h1>
			</div>
		</div><!--/.row-->

		<div class="row">
			<!-- Viết tiếp nội dung ở đây -->
			<section id="actions" class="py-4 mb-4 bg-faded">
		        <div class="container">
		            <div class="row">
		                <div class="col-md-3">
		                    <a class="btn btn-success btn-block" data-toggle="modal" data-target="#passwordModal">
		                        <i class="fa fa-lock"></i> Đổi mật khẩu
		                    </a>
		                </div>
		            </div>
		        </div>
		    </section>

			<!-- Thay đổi thông tin -->
			<form novalidate action="/account/changeInfo" method="POST" id="infoForm" class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="card-header">
							<h4>&nbsp;</h4>
						</div>
						{{#each this.user}}
						<div class="card-block">
							<div class="form-group">
								<label class="form-control-label">Họ và tên</label>
								<input type="text" name="username" class="form-control" value="{{Name}}">
							</div>
							<div class="form-group">
								<label for="email" class="form-control-label">Email</label>
								<input type="email" name="email" class="form-control" value="{{Email}}">
							</div>
							<div class="form-group">
								<label  class="form-control-label">Bút danh</label>
								<input type="text" name="pseudonym" class="form-control" value="{{Pseudonym}}">
							</div>
							<div class="form-group">
								<label  class="form-control-label">Chức Vụ</label>
								<input name="permission" type="number" class="form-control" value="{{Permission}}">
							</div>
						</div>
						{{/each}}
					</div>
				</div>
				<div class="col-md-3" style="margin-left: 400px; margin-bottom: 20px">
					<button type="submit" class="btn btn-success btn-block">
						<i class="fa fa-edit"></i> Cập nhật
					</button>
				</div>
			</form>

		    <!-- PROFILE MODAL -->
		    <div class="modal fade" id="passwordModal">
		        <div class="modal-dialog modal-lg">
		            <form novalidate action="/account/changePasword" method="POST" id="changePasswordForm" class="modal-content">
		                <div class="modal-header bg-warning">
		                    <h5 class="modal-title text-white" id="passwordModalLabel">Đổi mật khẩu</h5>
		                    <button class="close" data-dismiss="modal">
		                        <span>&times;</span>
		                    </button>
		                </div>
		                <div class="modal-body">
		                        <div class="form-group">
		                            <label for="password" class="form-control-label">Mật khẩu hiện tại</label>
		                            <input name="currentpassword" type="password" class="form-control">
		                        </div>
		                        <div class="form-group">
		                            <label for="password" class="form-control-label">Mật khẩu mới</label>
		                            <input type="password" name="newpassword" id="password_new" class="form-control">
		                        </div>
		                        <div class="form-group">
		                            <label for="confirm_password" class="form-control-label">Xác nhận mật khẩu</label>
		                            <input type="password" name="confirmpassword" class="form-control">
		                        </div>
		                </div>
		                <div class="modal-footer">
		                    <button class="btn btn-outline-secondary" data-dismiss="modal">Đóng</button>
		                    <button class="btn btn-outline-warning" type="submit" >Xác nhận</button>
		                </div>
		            </form>
		        </div>
		    </div>
		</div>

	</div>
	<!--/.main-->
	
	<script src="../js/jquery-2.1.4.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="../js/jquery-1.11.1.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/chart.min.js"></script>
	<script src="../js/chart-data.js"></script>
	<script src="../js/easypiechart.js"></script>
	<script src="../js/easypiechart-data.js"></script>
	<script src="../js/bootstrap-datepicker.js"></script>
	<script src="../js/custom.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
    <script>
    $(function () {
        $('#infoForm').validate({
            rules:{
                username:{
                    required: true
                },
                email:{
                    required: true,
                    remote: {
                        url: '/account/is-available1'
                    }
                },
                pseudonym:{
                    required: true,
                },
                permission:{
                    required: true,
                    maxlength: 1,
					min: 1,
					max: 4
                }
            },
            messages:{
                username:{
                    required: 'Your user name is required.'
                },
                email:{
                    required: 'Your email is required.',
                    remote: 'Email has been used. Try another Email'
                },
                pseudonym:{
                    required: 'Your pseudonym is required.'
                },
                permission:{
                    required: 'Your permission password is required'
                }
            },
            errorElement: 'small',
            errorClass: 'help-block text-danger'
        	});
    	})
	</script>

<script>
    $(function () {
        $('#changePasswordForm').validate({
            rules:{
                currentpassword:{
                    required: true
                },
                newpassword:{
                    required: true,
					minlength: 6
                },
				confirmpassword:{
					required: true,
					equalTo: $('[name="newpassword"]')
				}
            },
            messages:{
                currentpasword:{
                    required: 'Your current password is required.'
                },
                newpassword:{
                    required: 'New password is required.',
                },
				confirmpassword:{
                    required: 'Confirm password is required.'
                }
            },
            errorElement: 'small',
            errorClass: 'help-block text-danger',
			highlight: function (e) {
				$(e).removeClass('is-valid').addClass('is-invalid');
			},
			unhighlight: function (e) {
				$(e).removeClass('is-invalid').addClass('is-valid');
			}
    	 	});
    	})
	</script>
</body>
</html>